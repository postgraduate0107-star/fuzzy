# 洗衣機模糊控制器 (Washing Machine Fuzzy Controller)

這是一個基於網頁的動態應用程式，旨在模擬和視覺化一個洗衣機的模糊邏輯控制器。使用者可以透過調整輸入的「污泥」和「油污」程度，系統會根據模糊邏輯演算法即時計算出最佳的建議清洗時間。

這個專案的靈感來自於 MATLAB 的模糊邏輯工具箱，並使用 HTML、CSS 和 JavaScript（搭配 Chart.js）實現。

## 功能特色

- **動態輸入**：提供兩個滑桿，讓使用者可以直觀地調整「污泥程度」和「油污程度」的輸入值（範圍 0-200）。
- **即時計算**：根據輸入值，即時更新計算出的「建議清洗時間」。
- **完整視覺化**：透過四個互動式圖表，完整呈現模糊邏輯的每一個步驟：
    1.  **污泥隸屬函數**：顯示目前污泥值在「少、中、多」三個模糊集合中的隸屬度。
    2.  **油污隸屬函數**：顯示目前油污值在「無、中、多」三個模糊集合中的隸屬度。
    3.  **清洗時間隸屬函數**：展示輸出的模糊集合定義。
    4.  **輸出結果**：視覺化模糊規則推理後的聚合結果，並標示出最終透過重心法計算出的清晰時間點。

## 核心演算法說明

本專案的核心是模糊邏輯，其計算過程分為以下四個主要步驟：

### 1. 模糊化 (Fuzzification)

此步驟將使用者輸入的、清晰的數值（例如：污泥程度 = 120）轉換為模糊的語言值。

-   **輸入**：0 到 200 的具體數值。
-   **過程**：使用**三角形隸屬函數 (Triangular Membership Function)** 來計算該數值在每一個模糊集合（例如污泥的 `SD` - 少、`MD` - 中、`LD` - 多）中的**隸屬度 (Membership Degree)**，隸屬度是一個 0 到 1 之間的數值。
-   **輸出**：一組描述輸入狀態的隸屬度（例如：污泥程度 120 可能對應 { SD: 0, MD: 0.8, LD: 0.2 }）。

### 2. 模糊規則推理 (Rule Evaluation / Inference)

此步驟模擬人類的判斷邏輯，根據一組預先定義的「IF-THEN」規則進行推理。規則庫如下：

| 污泥 \ 油污 | 無 (NG) | 中 (MG) | 多 (LG) |
| :--- | :--- | :--- | :--- |
| 少 (SD) | 極短 (VS) | 短 (S) | 中 (M) |
| 中 (MD) | 短 (S) | 中 (M) | 長 (L) |
| 多 (LD) | 中 (M) | 長 (L) | 極長 (VL) |

-   **過程**：對於由「污泥」和「油污」組合定義的每個規則，系統會取其對應輸入隸屬度的**最小值 (MIN)**，這個值代表了該規則被觸發的「強度」。例如，如果「污泥」在中等 (MD) 集合的隸屬度為 0.8，「油污」在多 (LG) 集合的隸屬度為 0.5，則該組合規則的強度就是 `MIN(0.8, 0.5) = 0.5`。

### 3. 聚合 (Aggregation)

此步驟將所有被觸發的規則的結論（`THEN` 部分）整合成一個單一的、聚合的模糊集合。

-   **過程**：對於每一個輸出的模糊集合（例如 `S` - 短、`M` - 中），系統會取所有指向它的規則強度中的**最大值 (MAX)**。這個最大值會用來「切割」該輸出隸屬函數的頂部。所有被切割後的隸屬函數圖形疊加在一起，就形成了最終的聚合輸出圖形。

### 4. 解模糊化 (Defuzzification)

此步驟將上一步得到的聚合模糊集合轉換回一個單一、清晰的具體數值，作為最終的輸出結果。

-   **過程**：本專案採用**重心法 (Center of Gravity, COG)**。這個方法會計算聚合後圖形的幾何重心所在的 X 軸座標。這個重心的位置，就是我們最終得到的「建議清洗時間」。

## 如何使用

1.  將專案資料夾下載到您的電腦。
2.  在網頁瀏覽器中直接開啟 `index.html` 檔案。
3.  拖動頁面上的兩個滑桿來調整輸入參數。
4.  觀察右側的圖表和最終的計算結果如何隨著您的調整而即時變化。

## 使用技術

-   **HTML5**
-   **CSS3**
-   **JavaScript (ES6+)**
-   **[Chart.js](https://www.chartjs.org/)** - 用於繪製所有動態圖表。
